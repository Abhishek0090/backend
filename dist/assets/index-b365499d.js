import{a as u}from"./react-ef3399cd.js";import{_ as C,O as D,E as ee,G as T,H as te,J as P,K as le,j as re,P as S}from"./main-7cd5216e.js";import{a as M}from"./axios-a900fd7e.js";import{u as ne,v as ae,y as W}from"./freelancerSlice-d7c5526c.js";import{a3 as oe,a1 as d,a2 as h,a4 as c}from"./formik.esm-48e41763.js";import{n as ie,o as m,s as se}from"./array-cc2e2e42.js";import{u as de}from"./freelancerApiSlice-c6fcda6f.js";import{j as r,F as B,a}from"./createLucideIcon-5244bfd8.js";import{d as ue}from"./chevron-left-7fef36cd.js";import{R as he}from"./RadioGroup-a29c3089.js";import{R as V}from"./Radio-9a925741.js";import{X as ce}from"./x-d8df971e.js";import{L as me}from"./loader-2-b93b986b.js";import"./Box-a7bad236.js";import"./FormGroup-5f8dff9d.js";const w=1,pe=S.default?S.default:S;ie({profile_photo:m().required("Please upload your profile photo"),firstname:m().required("Please enter your first name").matches(/^[aA-zZ\s]+$/,"Only alphabets are allowed for this field "),lastname:m().required("Please enter your last name").matches(/^[aA-zZ\s]+$/,"Only alphabets are allowed for this field "),email:m().email("Invalid email address").required("Your email address is required"),address:m().required("Please enter your address"),street:m().required("Please enter your street address"),city:m().required("Please enter your city"),state:m().required("Please enter your state"),pincode:m().min(6,"Pincode must be 6 digits").max(6,"Pincode must be 6 digits").required("Please enter your pincode").matches(/^[0-9]+$/,"Only numbers are allowed for this field "),whatsapp:m().required("It is important for contact purposes").max(12,"Phone number must be 10 digits"),terms:se().oneOf([!0],"Please accept our terms and conditions")});function Ie(){var A,U,z;const R=ne();ue();const s=ae(l=>l.freelancer.writerFreelancerFormData),[k,x]=u.useState(!1),[b,O]=u.useState(!0),[p,I]=u.useState([]),[H,L]=u.useState(""),[fe,j]=u.useState(!1),[E,Z]=u.useState("India"),[y,J]=u.useState("91"),[e,Y]=u.useState(null),[G,X]=u.useState(localStorage.getItem("random_number_profile_photo")||null);console.log("writerfreelancerData",s);const[K]=de(),t=oe({enableReinitialize:!0,initialValues:{showPassword:!1,firstname:(e==null?void 0:e.firstname)||"",lastname:(e==null?void 0:e.lastname)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.number)||"",whatsapp:(e==null?void 0:e.whatsapp)||"",country_name:(e==null?void 0:e.country_name)||"",country_code:(e==null?void 0:e.country_code)||"",gender:(e==null?void 0:e.gender)||"",address:(e==null?void 0:e.address)||"",street:(e==null?void 0:e.street)||"",city:(e==null?void 0:e.city)||"",state:(e==null?void 0:e.state)||"",pincode:(e==null?void 0:e.pincode)||"",bio:(e==null?void 0:e.bio)||"",terms:(e==null?void 0:e.terms)||!1},onSubmit:async l=>{var g;x(!0);const o={firstname:l==null?void 0:l.firstname,lastname:l==null?void 0:l.lastname,email:l==null?void 0:l.email,country_name:E,country_code:y,number:(g=l==null?void 0:l.phone)==null?void 0:g.replace(y,""),whatsapp:l==null?void 0:l.whatsapp,gender:l==null?void 0:l.gender,terms:l==null?void 0:l.terms,address:l==null?void 0:l.address,street:l==null?void 0:l.street,city:l==null?void 0:l.city,state:l==null?void 0:l.state,pincode:l==null?void 0:l.pincode,bio:l==null?void 0:l.bio};R(W({...o}));const f={...s,role:"Writer",submit:"submit"};K(f).unwrap().then(n=>{console.log("res",n),C.success(n==null?void 0:n.message)}).catch(n=>{console.log("err",n),C.error(n==null?void 0:n.message)}),x(!1)}}),Q=l=>{let o=[...p],f=!1;x(!0),l.forEach(i=>{o.length<w?o.push(i):f=!0}),I(o),L(URL.createObjectURL(o[0]));let g=JSON.parse(localStorage.getItem("random_number_profile_photo")),n={profile_photo:o,submit:"submit",random_number:g||G};M.post("http://localhost/blue-pen-backend/api/freelancer/fileuploadprofilepicwriter.php",n,{headers:{"Content-Type":"multipart/form-data"}}).then(i=>{var N,_,q;X((N=i==null?void 0:i.data)==null?void 0:N.random_number),localStorage.setItem("random_number_profile_photo",(_=i==null?void 0:i.data)==null?void 0:_.random_number),R(W({profile_photo:(q=i==null?void 0:i.data)==null?void 0:q.file_name_string})),console.log(i)}).catch(i=>{console.log(i)}),x(!1),j(!!f)},F=()=>{var o,f,g;let l={email:(o=t.values)==null?void 0:o.email,email_verified:s==null?void 0:s.email_verified,country_name:E,country_code:Number(y),number:Number((g=(f=t==null?void 0:t.values)==null?void 0:f.phone)==null?void 0:g.replace(y,"")),number_verified:s==null?void 0:s.number_verified,role:"Writer"};M.post("http://localhost/blue-pen-backend/api/freelancer/freelancersignupcheck.php",l,{headers:{"Content-Type":"application/json"}}).then(n=>{var i,N,_,q,$;(i=n==null?void 0:n.data)!=null&&i.present_writer&&Y((N=n==null?void 0:n.data)==null?void 0:N.freelancer_data),((_=n==null?void 0:n.data)==null?void 0:_.status)===200?C.success((q=n==null?void 0:n.data)==null?void 0:q.message):C.error(($=n==null?void 0:n.data)==null?void 0:$.message),O(!1),console.log(n==null?void 0:n.data)}).catch(n=>{O(!1),console.log(n)})},v=l=>{let o=[...l];o=o.filter(f=>f!==l),I(o),L("")};return u.useEffect(()=>{const l=localStorage.getItem("form");l&&JSON.parse(l)},[]),r(B,{children:r("div",{className:` max-w-3xl mx-auto  backdrop-blur-2xl  drop-shadow shadow-2xl rounded-xl py-10   ${b?"md:my-20 pb-36":"md:my-10 pb-0"}`,children:r("div",{className:"flex flex-col px-10 rounded-lg ",children:a("div",{className:"p-5",children:[a("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-left text-gray-900 ",children:[b?"Contact ":"Personal "," Details"]}),a("form",{onSubmit:t.handleSubmit,children:[a(B,{children:[a("div",{className:"flex flex-col items-center md:flex-row",children:[a("div",{className:"flex flex-col items-center ",children:[a(d,{sx:{m:1,width:"34ch"},variant:"outlined",required:!0,disabled:!b,children:[r(h,{htmlFor:"outlined-adornment-email",children:"Email"}),r(c,{error:t.errors.email&&t.touched.email,required:!0,type:"email",name:"email",id:"email",autoComplete:"on",label:"Email",sx:{borderRadius:"1000px"},value:t.values.email,onChange:t.handleChange("email"),onBlur:t.handleBlur("email")})]}),b?r(D,{category:"writer",validEmail:t.values.email.length>0&&t.values.email.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}):null]}),a("div",{className:"flex flex-col items-center ",children:[r(d,{sx:{m:1,width:"34ch"},children:r(pe,{country:"in",inputStyle:{borderRadius:"1000px",border:"1px solid #C4C4C4"},isValid:(l,o)=>(Z(o==null?void 0:o.name),J(o==null?void 0:o.countryCode),l.length<10?!1:l.match(/12345/)?"Invalid value: "+l+", "+(o==null?void 0:o.name):!l.match(/1234/)),copyNumbersOnly:!0,showDropdown:!1,value:t.values.phone,onChange:l=>t.setFieldValue("phone",l),onBlur:t.handleBlur("phone"),error:Boolean(t.errors.phone),disabled:!b})}),b?r(B,{children:y==="91"?r(ee,{category:"writer",phone:(A=t.values.phone)==null?void 0:A.length,phoneNumber:(z=(U=t.values)==null?void 0:U.phone)==null?void 0:z.replace(y,"")}):r("div",{className:"h-28"})}):null]})]}),b?r("div",{className:"flex items-center justify-center",children:r(T,{disabled:!((s==null?void 0:s.email_verified)===1&&(s==null?void 0:s.number_verified)===1),onClick:()=>F(),loading:k,variant:"contained",color:"primary",sx:{bgcolor:"#141B41",color:"#fff",mt:2,mb:2,py:2,width:"38ch",borderRadius:"1000px","&[disabled]":{backgroundColor:"#141B41",color:"#fff",opacity:.5,cursor:"not-allowed"},"&:hover":{backgroundColor:"#fff",color:"#000"}},children:"Confirm"})}):null]}),b?null:a(B,{children:[" ",a("div",{className:"flex flex-col items-center md:flex-row",children:[a(d,{sx:{m:1,width:"34ch"},variant:"outlined",required:!0,disabled:!!(e!=null&&e.firstname),children:[r(h,{htmlFor:"outlined-adornment-name",children:"First Name"}),r(c,{autoFocus:!0,error:t.errors.firstname&&t.touched.firstname,required:!0,id:"name",sx:{borderRadius:"1000px"},value:t.values.firstname,onChange:t.handleChange("firstname"),onBlur:t.handleBlur("firstname"),type:"text",label:"First Name"})]}),"``",a(d,{sx:{m:1,width:"34ch"},variant:"outlined",required:!0,disabled:!!(e!=null&&e.lastname),children:[r(h,{htmlFor:"outlined-adornment-name",children:"Last Name"}),r(c,{error:t.errors.lastname&&t.touched.lastname,required:!0,sx:{borderRadius:"1000px"},value:t.values.lastname,onChange:t.handleChange("lastname"),onBlur:t.handleBlur("lastname"),type:"text",label:"Last Name"})]})]}),a("div",{className:"grid grid-cols-2 ",children:[a(d,{sx:{m:1},variant:"outlined",required:!0,disabled:!!(e!=null&&e.whatsapp),children:[r(h,{htmlFor:"outlined-adornment-name",children:"Whatsapp Number"}),r(c,{error:t.errors.whatsapp&&t.touched.whatsapp,required:!0,sx:{borderRadius:"1000px"},value:t.values.whatsapp,onChange:t.handleChange("whatsapp"),onBlur:t.handleBlur("whatsapp"),type:"number",label:"Whatsapp Number",startAdornment:r(te,{position:"start",children:r("img",{src:"https://img.icons8.com/color/48/null/whatsapp--v1.png"})})})]}),r(d,{sx:{m:2,ml:7},variant:"outlined",required:!0,disabled:!!(e!=null&&e.gender),children:a(he,{row:!0,"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:t.values.gender,onChange:t.handleChange("gender"),children:[r(P,{value:"Female",control:r(V,{}),label:"Female"}),r(P,{value:"Male",control:r(V,{}),label:"Male"})]})})]}),a("div",{className:"flex flex-col items-center justify-center",children:[a("div",{className:"relative flex flex-row w-full",children:[a(d,{sx:{m:1,width:"100%"},variant:"outlined",required:!0,disabled:!!(e!=null&&e.street),children:[r(h,{htmlFor:"outlined-adornment-name",children:"Address"}),r(c,{error:t.errors.address&&t.touched.address,required:!0,sx:{borderRadius:"1000px"},value:t.values.address.address,onChange:t.handleChange("address"),onBlur:t.handleBlur("address"),type:"text",label:"Address"})]}),a(d,{sx:{m:1,width:"100%"},variant:"outlined",required:!0,disabled:!!(e!=null&&e.street),children:[r(h,{htmlFor:"outlined-adornment-name",children:"Street"}),r(c,{error:t.errors.street&&t.touched.street,required:!0,sx:{borderRadius:"1000px"},value:t.values.street,onChange:t.handleChange("street"),onBlur:t.handleBlur("street"),type:"text",label:"Street"})]})]}),a("div",{className:"relative flex flex-row flex-shrink-0",children:[a(d,{sx:{m:1},variant:"outlined",required:!0,disabled:!!(e!=null&&e.city),children:[r(h,{htmlFor:"outlined-adornment-name",children:"City"}),r(c,{error:t.errors.city&&t.touched.city,required:!0,sx:{borderRadius:"1000px"},value:t.values.city,onChange:t.handleChange("city"),onBlur:t.handleBlur("city"),type:"text",label:"City"})]}),a(d,{sx:{m:1},variant:"outlined",required:!0,disabled:!!(e!=null&&e.state),children:[r(h,{htmlFor:"outlined-adornment-name",children:"State"}),r(c,{error:t.errors.state&&t.touched.state,required:!0,sx:{borderRadius:"1000px"},value:t.values.state,onChange:t.handleChange("state"),onBlur:t.handleBlur("state"),type:"text",label:"State"})]}),a(d,{sx:{m:1},variant:"outlined",required:!0,disabled:!!(e!=null&&e.pincode),children:[r(h,{htmlFor:"outlined-adornment-name",children:"Pincode"}),r(c,{error:t.errors.pincode&&t.touched.pincode,required:!0,sx:{borderRadius:"1000px"},value:t.values.pincode,onChange:t.handleChange("pincode"),onBlur:t.handleBlur("pincode"),type:"text",label:"Pincode"})]})]}),a(d,{sx:{m:1},variant:"outlined",required:!0,fullWidth:!0,disabled:!!(e!=null&&e.bio),children:[r(h,{htmlFor:"outlined-adornment-name",children:"Bio"}),r(c,{required:!0,multiline:!0,rows:4,sx:{borderRadius:"25px"},value:t.values.bio,onChange:t.handleChange("bio"),onBlur:t.handleBlur("bio"),type:"text",label:"Bio",placeholder:"Tell us about yourself. (optional)"})]}),a("div",{className:"flex flex-col items-start justify-start w-full max-w-xl pt-1 pb-10",children:[(p==null?void 0:p.length)>=w?null:r("div",{className:"flex items-center justify-center w-full pb-2 ",children:a("label",{className:"flex flex-col items-center w-full px-4 py-6 tracking-wide uppercase bg-white border rounded-lg shadow-lg cursor-pointer text-blue border-blue hover:bg-blue hover:text-gray-400",children:[r("svg",{className:"w-8 h-8",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:r("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})}),a("span",{className:"mt-2 text-base leading-normal",children:[" ","Upload your Profile Picture"]}),r("input",{type:"file",className:"hidden",onChange:l=>{x(!0);let o=[...l.target.files];if(console.log("files :>> ",o),o.length>w){C.error(`You can upload only ${w} files`),x(!1);return}if(o.length+p.length>w){C.error(`You can upload only ${w} files`),x(!1);return}Q(o)}})]})}),(p==null?void 0:p.length)>0?a("div",{className:" flex items-center flex-col  justify-between  bg-gray-200 text-gray-800 px-2 rounded-lg my-0.5",children:[r("img",{src:H,alt:"profile",className:"p-4 w-48 h-48 rounded-lg object-cover"}),r("span",{onClick:()=>v(p),className:"m-1 leading-none text-white bg-red-500 rounded-full hover:text-gray-100 hover:bg-red-600",children:r(ce,{size:20})})]}):null,k?a("div",{role:"status",children:[r(me,{size:20,className:"animate-spin"}),r("span",{className:"sr-only",children:"Loading..."})]}):null]}),r(P,{sx:{mb:1,mt:4},control:r(le,{error:t.errors.terms&&t.touched.terms,checked:t.values.terms,onChange:t.handleChange("terms"),onBlur:t.handleBlur("terms"),name:"terms",sx:{color:"#6F9CEB","&.Mui-checked":{color:"#6F9CEB"}}}),label:a("span",{className:"text-sm text-left text-gray-400 ",children:["I agree to the"," ",r(re,{to:"/terms",className:"text-blue-500",children:"Terms and Conditions"})]})})]}),r("div",{className:"flex items-center justify-center",children:r(T,{onClick:t.handleSubmit,variant:"contained",color:"primary",type:"submit",sx:{bgcolor:"#141B41",color:"#fff",mt:2,mb:2,py:2,width:"38ch",borderRadius:"1000px","&[disabled]":{backgroundColor:"#141B41",color:"#fff",opacity:.5,cursor:"not-allowed"},"&:hover":{backgroundColor:"#fff",color:"#000"}},children:"Sign up"})})]})]})]})})})})}export{Ie as default};
