import{a as c}from"./react-ef3399cd.js";import{_,O as F,E as v,G as M,H as D,J as P,K as ee,j as te,P as R}from"./main-f01344a0.js";import{a as J}from"./axios-a900fd7e.js";import{u as re,v as le,z as I}from"./freelancerSlice-d7c5526c.js";import{a3 as ne,a1 as u,a2 as h,a4 as p}from"./formik.esm-48e41763.js";import{n as ae,o as m,s as oe}from"./array-cc2e2e42.js";import{b as se}from"./freelancerApiSlice-4bb01df2.js";import{j as l,F as q,a}from"./createLucideIcon-5244bfd8.js";import{d as ie}from"./chevron-left-7fef36cd.js";import{R as de}from"./RadioGroup-ca8415b2.js";import{R as U}from"./Radio-6bbef156.js";import{X as ue}from"./x-d8df971e.js";import{L as me}from"./loader-2-b93b986b.js";import"./Box-a7bad236.js";import"./FormGroup-5f8dff9d.js";const w=1,ce=R.default?R.default:R;ae({profile_photo:m().required("Please upload your profile photo"),firstname:m().required("Please enter your first name").matches(/^[aA-zZ\s]+$/,"Only alphabets are allowed for this field "),lastname:m().required("Please enter your last name").matches(/^[aA-zZ\s]+$/,"Only alphabets are allowed for this field "),email:m().email("Invalid email address").required("Your email address is required"),address:m().required("Please enter your address"),street:m().required("Please enter your street address"),city:m().required("Please enter your city"),state:m().required("Please enter your state"),pincode:m().min(6,"Pincode must be 6 digits").max(6,"Pincode must be 6 digits").required("Please enter your pincode").matches(/^[0-9]+$/,"Only numbers are allowed for this field "),whatsapp:m().required("It is important for contact purposes").max(12,"Phone number must be 10 digits"),terms:oe().oneOf([!0],"Please accept our terms and conditions")});function ke({uploadedFiles:he,resumeFiles:V}){var A,T,z;const B=re();ie();const i=le(r=>r.freelancer.technicalFreelancerFormData),[k,g]=c.useState(!1),[f,O]=c.useState(!0),[x,L]=c.useState([]),[pe,E]=c.useState(!1),[j,H]=c.useState("India"),[y,Z]=c.useState("91"),[e,Y]=c.useState(null),[G,W]=c.useState(localStorage.getItem("random_number_profile_photo")||null),[X]=se(),t=ne({enableReinitialize:!0,initialValues:{showPassword:!1,firstname:(e==null?void 0:e.firstname)||"",lastname:(e==null?void 0:e.lastname)||"",email:(e==null?void 0:e.email)||"",phone:(e==null?void 0:e.number)||"",whatsapp:(e==null?void 0:e.whatsapp)||"",country_name:(e==null?void 0:e.country_name)||"",country_code:(e==null?void 0:e.country_code)||"",gender:(e==null?void 0:e.gender)||"",address:(e==null?void 0:e.address)||"",street:(e==null?void 0:e.street)||"",city:(e==null?void 0:e.city)||"",state:(e==null?void 0:e.state)||"",pincode:(e==null?void 0:e.pincode)||"",terms:(e==null?void 0:e.terms)||!1},onSubmit:async r=>{var b;g(!0);const n={firstname:r==null?void 0:r.firstname,lastname:r==null?void 0:r.lastname,email:r==null?void 0:r.email,country_name:j,country_code:y,number:(b=r==null?void 0:r.phone)==null?void 0:b.replace(y,""),whatsapp:r==null?void 0:r.whatsapp,gender:r==null?void 0:r.gender,terms:r==null?void 0:r.terms,address:r==null?void 0:r.address,street:r==null?void 0:r.street,city:r==null?void 0:r.city,state:r==null?void 0:r.state,pincode:r==null?void 0:r.pincode};B(I({...n}));const d={...i,submit:"submit",past_work_files_random_number:JSON.parse(localStorage.getItem("random_number_past_work")),resume_random_number:JSON.parse(localStorage.getItem("random_number_resume")),profile_photo_random_number:JSON.parse(localStorage.getItem("random_number_profile_photo"))};X(d).unwrap().then(o=>{console.log("res",o),_.success("Technical Freelancer Registered Successfully")}).catch(o=>{console.log("err",o),_.error("Technical Freelancer Registration Failed")}),g(!1)}}),K=r=>{let n=[...V],d=!1;g(!0),r.forEach(s=>{n.length<w?n.push(s):d=!0}),L(n);let b=JSON.parse(localStorage.getItem("random_number_profile_photo")),o={profile_photo:n,submit:"submit",random_number:b||G};J.post("http://test.bluepen.co.in/api/freelancer/fileuploadprofilepic.php",o,{headers:{"Content-Type":"multipart/form-data"}}).then(s=>{var C,N,S;W((C=s==null?void 0:s.data)==null?void 0:C.random_number),localStorage.setItem("random_number_profile_photo",(N=s==null?void 0:s.data)==null?void 0:N.random_number),B(I({profile_photo:(S=s==null?void 0:s.data)==null?void 0:S.file_name_string})),console.log(s)}).catch(s=>{console.log(s)}),g(!1),E(!!d)},Q=()=>{var n,d,b;let r={email:(n=t.values)==null?void 0:n.email,email_verified:i==null?void 0:i.email_verified,country_name:j,country_code:Number(y),number:Number((b=(d=t==null?void 0:t.values)==null?void 0:d.phone)==null?void 0:b.replace(y,"")),number_verified:i==null?void 0:i.number_verified,role:i==null?void 0:i.role};J.post("http://test.bluepen.co.in/api/freelancer/freelancersignupcheck.php",r,{headers:{"Content-Type":"application/json"}}).then(o=>{var s,C,N,S,$;(s=o==null?void 0:o.data)!=null&&s.present_non_technical&&Y((C=o==null?void 0:o.data)==null?void 0:C.freelancer_data),((N=o==null?void 0:o.data)==null?void 0:N.status)===200?_.success((S=o==null?void 0:o.data)==null?void 0:S.message):_.error(($=o==null?void 0:o.data)==null?void 0:$.message),O(!1),console.log(o==null?void 0:o.data)}).catch(o=>{O(!1),console.log(o)})};return c.useEffect(()=>{var n;const r=localStorage.getItem("form");if(r){const d=JSON.parse(r);B(I({role:(n=d[1])==null?void 0:n.Step2}))}},[]),l(q,{children:l("div",{className:` max-w-3xl mx-auto  backdrop-blur-2xl  drop-shadow shadow-2xl rounded-xl py-10   ${f?"md:my-20 pb-36":"md:my-10 pb-0"}`,children:l("div",{className:"flex flex-col px-10 rounded-lg ",children:a("div",{className:"p-5",children:[a("h5",{className:"mb-2 text-2xl font-bold tracking-tight text-left text-gray-900 ",children:[f?"Contact ":"Personal "," Details"]}),a("form",{onSubmit:t.handleSubmit,children:[a(q,{children:[a("div",{className:"flex flex-col items-center md:flex-row",children:[a("div",{className:"flex flex-col items-center ",children:[a(u,{sx:{m:1,width:"34ch"},variant:"outlined",required:!0,disabled:!f,children:[l(h,{htmlFor:"outlined-adornment-email",children:"Email"}),l(p,{error:t.errors.email&&t.touched.email,required:!0,type:"email",name:"email",id:"email",autoComplete:"on",label:"Email",sx:{borderRadius:"1000px"},value:t.values.email,onChange:t.handleChange("email"),onBlur:t.handleBlur("email")})]}),f?l(F,{category:"non_technical",validEmail:t.values.email.length>0&&t.values.email.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}):null]}),a("div",{className:"flex flex-col items-center ",children:[l(u,{sx:{m:1,width:"34ch"},children:l(ce,{country:"in",inputStyle:{borderRadius:"1000px",border:"1px solid #C4C4C4"},isValid:(r,n)=>(H(n==null?void 0:n.name),Z(n==null?void 0:n.countryCode),r.length<10?!1:r.match(/12345/)?"Invalid value: "+r+", "+(n==null?void 0:n.name):!r.match(/1234/)),copyNumbersOnly:!0,showDropdown:!1,value:t.values.phone,onChange:r=>t.setFieldValue("phone",r),onBlur:t.handleBlur("phone"),error:Boolean(t.errors.phone),disabled:!f})}),f?l(q,{children:y==="91"?l(v,{category:"non_technical",phone:(A=t.values.phone)==null?void 0:A.length,phoneNumber:(z=(T=t.values)==null?void 0:T.phone)==null?void 0:z.replace(y,"")}):l("div",{className:"h-28"})}):null]})]}),f?l("div",{className:"flex items-center justify-center",children:l(M,{disabled:!((i==null?void 0:i.email_verified)===1&&(i==null?void 0:i.number_verified)===1),onClick:()=>Q(),loading:k,variant:"contained",color:"primary",sx:{bgcolor:"#141B41",color:"#fff",mt:2,mb:2,py:2,width:"38ch",borderRadius:"1000px","&[disabled]":{backgroundColor:"#141B41",color:"#fff",opacity:.5,cursor:"not-allowed"},"&:hover":{backgroundColor:"#fff",color:"#000"}},children:"Confirm"})}):null]}),f?null:a(q,{children:[" ",a("div",{className:"flex flex-col items-center md:flex-row",children:[a(u,{sx:{m:1,width:"34ch"},variant:"outlined",required:!0,disabled:!!(e!=null&&e.firstname),children:[l(h,{htmlFor:"outlined-adornment-name",children:"First Name"}),l(p,{autoFocus:!0,error:t.errors.firstname&&t.touched.firstname,required:!0,id:"name",sx:{borderRadius:"1000px"},value:t.values.firstname,onChange:t.handleChange("firstname"),onBlur:t.handleBlur("firstname"),type:"text",label:"First Name"})]}),a(u,{sx:{m:1,width:"34ch"},variant:"outlined",required:!0,disabled:!!(e!=null&&e.lastname),children:[l(h,{htmlFor:"outlined-adornment-name",children:"Last Name"}),l(p,{error:t.errors.lastname&&t.touched.lastname,required:!0,sx:{borderRadius:"1000px"},value:t.values.lastname,onChange:t.handleChange("lastname"),onBlur:t.handleBlur("lastname"),type:"text",label:"Last Name"})]})]}),a("div",{className:"grid grid-cols-2 ",children:[a(u,{sx:{m:1},variant:"outlined",required:!0,disabled:!!(e!=null&&e.whatsapp),children:[l(h,{htmlFor:"outlined-adornment-name",children:"Whatsapp Number"}),l(p,{error:t.errors.whatsapp&&t.touched.whatsapp,required:!0,sx:{borderRadius:"1000px"},value:t.values.whatsapp,onChange:t.handleChange("whatsapp"),onBlur:t.handleBlur("whatsapp"),type:"number",label:"Whatsapp Number",startAdornment:l(D,{position:"start",children:l("img",{src:"https://img.icons8.com/color/48/null/whatsapp--v1.png"})})})]}),l(u,{sx:{m:2,ml:7},variant:"outlined",required:!0,disabled:!!(e!=null&&e.gender),children:a(de,{row:!0,"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:t.values.gender,onChange:t.handleChange("gender"),children:[l(P,{value:"Female",control:l(U,{}),label:"Female"}),l(P,{value:"Male",control:l(U,{}),label:"Male"})]})})]}),a("div",{className:"flex flex-col items-center justify-center",children:[a("div",{className:"relative flex flex-row w-full",children:[a(u,{sx:{m:1,width:"100%"},variant:"outlined",required:!0,disabled:!!(e!=null&&e.street),children:[l(h,{htmlFor:"outlined-adornment-name",children:"Address"}),l(p,{error:t.errors.address&&t.touched.address,required:!0,sx:{borderRadius:"1000px"},value:t.values.address.address,onChange:t.handleChange("address"),onBlur:t.handleBlur("address"),type:"text",label:"Address"})]}),a(u,{sx:{m:1,width:"100%"},variant:"outlined",required:!0,disabled:!!(e!=null&&e.street),children:[l(h,{htmlFor:"outlined-adornment-name",children:"Street"}),l(p,{error:t.errors.street&&t.touched.street,required:!0,sx:{borderRadius:"1000px"},value:t.values.street,onChange:t.handleChange("street"),onBlur:t.handleBlur("street"),type:"text",label:"Street"})]})]}),a("div",{className:"relative flex flex-row flex-shrink-0",children:[a(u,{sx:{m:1},variant:"outlined",required:!0,disabled:!!(e!=null&&e.city),children:[l(h,{htmlFor:"outlined-adornment-name",children:"City"}),l(p,{error:t.errors.city&&t.touched.city,required:!0,sx:{borderRadius:"1000px"},value:t.values.city,onChange:t.handleChange("city"),onBlur:t.handleBlur("city"),type:"text",label:"City"})]}),a(u,{sx:{m:1},variant:"outlined",required:!0,disabled:!!(e!=null&&e.state),children:[l(h,{htmlFor:"outlined-adornment-name",children:"State"}),l(p,{error:t.errors.state&&t.touched.state,required:!0,sx:{borderRadius:"1000px"},value:t.values.state,onChange:t.handleChange("state"),onBlur:t.handleBlur("state"),type:"text",label:"State"})]}),a(u,{sx:{m:1},variant:"outlined",required:!0,disabled:!!(e!=null&&e.pincode),children:[l(h,{htmlFor:"outlined-adornment-name",children:"Pincode"}),l(p,{error:t.errors.pincode&&t.touched.pincode,required:!0,sx:{borderRadius:"1000px"},value:t.values.pincode,onChange:t.handleChange("pincode"),onBlur:t.handleBlur("pincode"),type:"text",label:"Pincode"})]})]}),a("div",{className:"flex flex-col items-start justify-start w-full max-w-xl pt-1 pb-10",children:[(x==null?void 0:x.length)>=w?null:l("div",{className:"flex items-center justify-center w-full pb-2 ",children:a("label",{className:"flex flex-col items-center w-full px-4 py-6 tracking-wide uppercase bg-white border rounded-lg shadow-lg cursor-pointer text-blue border-blue hover:bg-blue hover:text-gray-400",children:[l("svg",{className:"w-8 h-8",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",children:l("path",{d:"M16.88 9.1A4 4 0 0 1 16 17H5a5 5 0 0 1-1-9.9V7a3 3 0 0 1 4.52-2.59A4.98 4.98 0 0 1 17 8c0 .38-.04.74-.12 1.1zM11 11h3l-4-4-4 4h3v3h2v-3z"})}),a("span",{className:"mt-2 text-base leading-normal",children:[" ","Upload your Profile Picture"]}),l("input",{type:"file",className:"hidden",onChange:r=>{g(!0);let n=[...r.target.files];if(console.log("files :>> ",n),n.length>w){_.error(`You can upload only ${w} files`),g(!1);return}if(n.length+x.length>w){_.error(`You can upload only ${w} files`),g(!1);return}K(n)}})]})}),x==null?void 0:x.map((r,n)=>a("div",{className:"flex items-center  justify-between w-full bg-gray-200 text-gray-800 px-2 rounded-lg my-0.5",children:[a("span",{className:"p-1 rounded-lg ",children:[n+1,". ",r==null?void 0:r.name]}),l("button",{onClick:()=>{let d=[...r];d.splice(n,1),L(d)},className:"m-1 leading-none text-white bg-red-500 rounded-full hover:text-gray-100 hover:bg-red-600",children:l(ue,{size:20})})]},n)),k?a("div",{role:"status",children:[l(me,{size:20,className:"animate-spin"}),l("span",{className:"sr-only",children:"Loading..."})]}):null]}),l(P,{sx:{mb:1,mt:4},control:l(ee,{error:t.errors.terms&&t.touched.terms,checked:t.values.terms,onChange:t.handleChange("terms"),onBlur:t.handleBlur("terms"),name:"terms",sx:{color:"#6F9CEB","&.Mui-checked":{color:"#6F9CEB"}}}),label:a("span",{className:"text-sm text-left text-gray-400 ",children:["I agree to the"," ",l(te,{to:"/terms",className:"text-blue-500",children:"Terms and Conditions"})]})})]}),l("div",{className:"flex items-center justify-center",children:l(M,{onClick:t.handleSubmit,variant:"contained",color:"primary",type:"submit",sx:{bgcolor:"#141B41",color:"#fff",mt:2,mb:2,py:2,width:"38ch",borderRadius:"1000px","&[disabled]":{backgroundColor:"#141B41",color:"#fff",opacity:.5,cursor:"not-allowed"},"&:hover":{backgroundColor:"#fff",color:"#000"}},children:"Sign up"})})]})]})]})})})})}export{ke as default};
