import{a as v}from"./react-ef3399cd.js";import{ag as B,ah as E,ai as Y,aj as ie,an as Ae,o as I,J as H,ao as q,ap as Ne,M as te,_ as k,ac as U,d as F,L as G,a as J,C as he,b as je,B as M,ad as ze,t as Te,H as fe,aq as pe,j as xe,am as Se,ar as Ie,as as Le}from"./main-f01344a0.js";import{d as Re}from"./ArrowForwardTwoTone-9e8dceac.js";import{a as o,j as e,F as j}from"./createLucideIcon-5244bfd8.js";import{d as Pe,j as Me}from"./chevron-left-7fef36cd.js";import{B as x}from"./Box-a7bad236.js";import{T as f,I as V,l as me,i as Fe,C as W,M as He,F as qe}from"./array-cc2e2e42.js";import{a as R}from"./axios-a900fd7e.js";import{P as We}from"./index-332ee04c.js";import{T as K,a as Q,b as X,d as Be,c as Z,e as O,f as Ee,R as Ye,g as Ve,h as Ue}from"./EmailTwoTone-17e31eb7.js";import{d as Ge}from"./MoreVertTwoTone-da0f4c46.js";import{C as Je}from"./CardHeader-92f6f4b2.js";import{F as D}from"./FormGroup-5f8dff9d.js";import{d as Ke}from"./WhatsApp-f0c36484.js";import{J as re,a1 as ye,z as ve,a4 as _e}from"./formik.esm-48e41763.js";import{h as ae}from"./moment-fbc5633a.js";import{d as Qe}from"./ScheduleTwoTone-3352b6b1.js";import{G as S}from"./Grid-9fa1086d.js";import{C as Xe}from"./CardActions-042e7dd4.js";import{D as be}from"./DataGrid-47ad2e1a.js";import{T as Ze,a as Oe}from"./Tabs-45f10467.js";import"./freelancerSlice-d7c5526c.js";import"./x-d8df971e.js";import"./visuallyHidden-14c3de6e.js";import"./ListItemIcon-e90507b9.js";import"./Switch-d4e13bec.js";import"./TablePagination-1a60c708.js";import"./KeyboardArrowRight-188e7a04.js";import"./LastPage-d124ce37.js";import"./Toolbar-cff0d745.js";var oe={},De=E;Object.defineProperty(oe,"__esModule",{value:!0});var we=oe.default=void 0,et=De(B()),tt=Y,rt=(0,et.default)((0,tt.jsx)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackTwoTone");we=oe.default=rt;function ot({id:t,assignmentDetails:n}){const b=Pe();return o(x,{display:"flex",alignItems:{xs:"stretch",md:"center"},flexDirection:{xs:"column",md:"row"},justifyContent:"space-between",children:[o(x,{display:"flex",alignItems:"center",children:[e(ie,{onClick:()=>{n!=null&&n.previous_assignment_id&&(b(`/team/management/assignments/details/${Number(n==null?void 0:n.previous_assignment_id)}`),console.log("prev"))},sx:{cursor:"pointer"},variant:"rounded",children:e(we,{fontSize:"large"})}),o(x,{children:[o(f,{variant:"h3",component:"h3",gutterBottom:!0,children:["Assignment Id: ",t]}),e(f,{variant:"subtitle2",children:"Manage your day to day tasks with style! Enjoy a well built UI system."})]})]}),e(x,{mt:{xs:3,md:0},children:e(ie,{onClick:()=>{n!=null&&n.next_assignment_id&&(b(`/team/management/assignments/details/${Number(n==null?void 0:n.next_assignment_id)}`),console.log("next"))},sx:{cursor:"pointer"},variant:"rounded",children:e(Re,{fontSize:"large"})})})]})}function lt({assignmentDetails:t,id:n}){const b=v.useRef(null),[T,C]=v.useState(!1),[h,w]=v.useState({posted:!1,under_process:!1,assigned_to_pm:!1,assigned_to_freelancer:!1,completed:!1,review_received:!1,reset:!1,lost:!1}),[a,L]=v.useState({posted:(t==null?void 0:t.posted)==="1",under_process:(t==null?void 0:t.under_process)==="1",assigned_to_pm:(t==null?void 0:t.assigned_to_pm)==="1",assigned_to_freelancer:(t==null?void 0:t.assigned_to_freelancer)==="1",completed:(t==null?void 0:t.completed)==="1",review_received:(t==null?void 0:t.review_received)==="1"}),N=async c=>{w({...h,[c]:!0});const $=(a[c],c);try{const g=await R.get(`http://test.bluepen.co.in/api/team/assignmentstatus.php?id=${n}&status=${$}`);k.success(g.data.status),L({...a,[$]:!a[$]}),w({...h,[c]:!1})}catch{k.error("Couldn't update assignment status"),w({...h,[c]:!1})}},l=()=>{C(!0)},p=()=>{C(!1)},_=async()=>{w({...h,reset:!0});try{const c=await R.get(`http://test.bluepen.co.in/api/team/assignmentreset.php?assignment_id=${n}`);k.success(c.data.status),window.location.reload()}catch{k.error("Couldn't reset assignment")}w({...h,reset:!1}),p()},z=async()=>{w({...h,lost:!0});try{const c=await R.get(`http://test.bluepen.co.in/api/team/assignmentlost.php?assignment_id=${n}`);k.success(c.data.status),window.location.reload()}catch{k.error("Couldn't declare assignment lost")}w({...h,lost:!1}),p()};return v.useEffect(()=>{L({posted:(t==null?void 0:t.posted)==="1",under_process:(t==null?void 0:t.under_process)==="1",assigned_to_pm:(t==null?void 0:t.assigned_to_pm)==="1",assigned_to_freelancer:(t==null?void 0:t.assigned_to_freelancer)==="1",completed:(t==null?void 0:t.completed)==="1",review_received:(t==null?void 0:t.review_received)==="1"})},[t]),o(x,{children:[e(Je,{sx:{px:0,pt:0},action:e(V,{ref:b,onClick:l,size:"small",color:"primary",children:e(Ge,{})}),title:"Assignment Status"}),o(Ae,{sx:{maxWidth:"fit-content"},children:[o(K,{children:[o(Q,{children:[e(X,{color:"primary",children:e(Be,{})}),e(Z,{})]}),o(O,{children:[e(f,{variant:"h4",sx:{pb:2},children:"Assignment Details"}),o(D,{children:[h.posted?o("span",{className:"flex items-center justify-start",children:[e(I,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Posted"})]}):e(H,{control:e(q,{color:"primary",checked:a==null?void 0:a.posted,name:"checkedC",onChange:c=>N("posted"),inputProps:{"aria-label":"controlled"}}),label:"Posted"}),h.under_process?o("span",{className:"flex items-center justify-start",children:[e(I,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Under Process"})]}):e(H,{control:e(q,{color:"primary",checked:a==null?void 0:a.under_process,name:"checkedC",onChange:c=>N("under_process"),inputProps:{"aria-label":"controlled"}}),label:"Under Process"})]})]})]}),o(K,{children:[o(Q,{children:[e(X,{color:"primary",children:e(Ne,{})}),e(Z,{})]}),o(O,{children:[e(f,{variant:"h4",sx:{pb:2},children:"Project Management"}),o(D,{children:[h.assigned_to_pm?o("span",{className:"flex items-center justify-start",children:[e(I,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Assigned to PM"})]}):e(H,{control:e(q,{checked:a==null?void 0:a.assigned_to_pm,color:"primary",name:"checkedC",onChange:c=>N("assigned_to_pm"),inputProps:{"aria-label":"controlled"}}),label:"Assigned to PM"}),h.assigned_to_freelancer?o("span",{className:"flex items-center justify-start",children:[e(I,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Assigned to Freelancer"})]}):e(H,{control:e(q,{checked:a==null?void 0:a.assigned_to_freelancer,onChange:c=>N("assigned_to_freelancer"),color:"primary",name:"checkedC",inputProps:{"aria-label":"controlled"}}),label:"Assigned to Freelancer"})]})]})]}),o(K,{children:[o(Q,{children:[e(X,{color:"primary",children:e(Ee,{})}),e(Z,{})]}),o(O,{children:[e(f,{variant:"h4",sx:{pb:2},children:"Assignment Completion"}),o(D,{children:[h.completed?o("span",{className:"flex items-center justify-start",children:[e(I,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Completed"})]}):e(H,{control:e(q,{checked:a==null?void 0:a.completed,color:"primary",name:"checkedC",onChange:c=>N("completed"),inputProps:{"aria-label":"controlled"}}),label:"Completed"})," ",h.review_received?o("span",{className:"flex items-center justify-start",children:[e(I,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Review Received"})]}):e(H,{control:e(q,{checked:a==null?void 0:a.review_received,color:"primary",name:"checkedC",onChange:c=>N("review_received"),inputProps:{"aria-label":"controlled"}}),label:"Review Received"})]})]})]})]}),o(me,{anchorEl:b.current,onClose:p,open:T,children:[e(te,{sx:{px:3},onClick:()=>{_()},children:h.reset?o(j,{children:[e(I,{size:20}),e("span",{style:{marginLeft:"10px"},children:"Reset"})]}):e("span",{children:"Reset"})}),e(te,{sx:{px:3},onClick:()=>{z()},children:h.lost?o(j,{children:[e(I,{size:20}),e("span",{style:{color:"#f44336",marginLeft:"10px"},children:"Declare Lost"})]}):e("span",{style:{color:"#f44336"},children:"Declare Lost"})})]})]})}function nt({userDetails:t}){return re(),o(x,{children:[o(f,{align:"center",variant:"h4",gutterBottom:!0,children:[t==null?void 0:t.user_first_name," ",t==null?void 0:t.user_last_name]}),e(f,{align:"center",variant:"subtitle2",gutterBottom:!0,children:"Senior Web Developer"}),o(x,{display:"flex",alignItems:"center",justifyContent:"center",children:[e(Ye,{value:4,defaultValue:5,precision:1,readOnly:!0}),e(f,{variant:"h5",sx:{pl:.5},children:"4.1"})]}),o(x,{py:2,display:"flex",alignItems:"center",justifyContent:"center",children:[e(U,{arrow:!0,placement:"top",title:"Call",children:e(V,{color:"primary",sx:{mx:.5},children:e(Ve,{})})}),e(U,{arrow:!0,placement:"top",title:"Send email",children:e(V,{color:"primary",sx:{mx:.5},children:e(Ue,{})})}),e(U,{arrow:!0,placement:"top",title:"Send message",children:e(V,{color:"primary",sx:{mx:.5},children:e(Ke,{})})})]}),o(Fe,{sx:{px:2},children:[e(F,{component:"li"}),o(G,{sx:{py:1.5},children:[e(J,{primary:"Email",primaryTypographyProps:{variant:"subtitle2"}}),e(f,{variant:"subtitle2",color:"text.primary",children:t==null?void 0:t.user_email})]}),e(F,{component:"li"}),o(G,{sx:{py:1.5},children:[e(J,{primary:"Phone Number",primaryTypographyProps:{variant:"subtitle2"}}),e(f,{variant:"subtitle2",color:"text.primary",children:t==null?void 0:t.user_number})]}),e(F,{component:"li"}),o(G,{sx:{py:1.5},children:[e(J,{primary:"Address",primaryTypographyProps:{variant:"subtitle2"}}),e(f,{variant:"subtitle2",color:"text.primary",fontWeight:"bold",children:t==null?void 0:t.user_address})]})]})]})}var le={},ct=E;Object.defineProperty(le,"__esModule",{value:!0});var Ce=le.default=void 0,dt=ct(B()),se=Y,it=(0,dt.default)([(0,se.jsx)("path",{d:"m19.21 12.04-1.53-.11-.3-1.5C16.88 7.86 14.62 6 12 6 9.94 6 8.08 7.14 7.12 8.96l-.5.95-1.07.11C3.53 10.24 2 11.95 2 14c0 2.21 1.79 4 4 4h13c1.65 0 3-1.35 3-3 0-1.55-1.22-2.86-2.79-2.96zM12 17l-4-4h2.55v-3h2.91v3H16l-4 4z",opacity:".3"},"0"),(0,se.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3zm-5.55-8h-2.9v3H8l4 4 4-4h-2.55z"},"1")],"CloudDownloadTwoTone");Ce=le.default=it;var ne={},at=E;Object.defineProperty(ne,"__esModule",{value:!0});var ge=ne.default=void 0,st=at(B()),ee=Y,ut=(0,st.default)([(0,ee.jsx)("path",{d:"M11.17 4H7v11h14V6h-7.83z",opacity:".3"},"0"),(0,ee.jsx)("path",{d:"M21 4h-7l-2-2H7c-1.1 0-1.99.9-1.99 2L5 15c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 11H7V4h4.17l2 2H21v9z"},"1"),(0,ee.jsx)("path",{d:"M3 6H1v13c0 1.1.9 2 2 2h17v-2H3V6z"},"2")],"FolderCopyTwoTone");ge=ne.default=ut;var ce={},ht=E;Object.defineProperty(ce,"__esModule",{value:!0});var ke=ce.default=void 0,ft=ht(B()),ue=Y,pt=(0,ft.default)([(0,ue.jsx)("path",{d:"M5 5h14v2H5z",opacity:".3"},"0"),(0,ue.jsx)("path",{d:"M19 3h-1V1h-2v2H8V1H6v2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V9h14v10zm0-12H5V5h14v2zm-2.51 4.53-1.06-1.06-4.87 4.87-2.11-2.11-1.06 1.06 3.17 3.17z"},"1")],"EventAvailableTwoTone");ke=ce.default=pt;var de={},xt=E;Object.defineProperty(de,"__esModule",{value:!0});var $e=de.default=void 0,mt=xt(B()),yt=Y,vt=(0,mt.default)((0,yt.jsx)("path",{d:"M13.66 7c-.56-1.18-1.76-2-3.16-2H6V3h12v2h-3.26c.48.58.84 1.26 1.05 2H18v2h-2.02c-.25 2.8-2.61 5-5.48 5h-.73l6.73 7h-2.77L7 14v-2h3.5c1.76 0 3.22-1.3 3.46-3H6V7h7.66z"}),"CurrencyRupeeTwoTone");$e=de.default=vt;const _t={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:600,bgcolor:"background.paper",border:"2px solid #918EF4",boxShadow:24,p:4,borderRadius:"1rem",argin:"10px 100px",height:"auto"},bt=({children:t})=>{const n=t,[b,T]=v.useState(!0),C=()=>{T(!b)};return o("p",{className:"text",children:[b?n==null?void 0:n.slice(0,150):e(ze,{children:e(Te.div,{layout:!0,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:n},"content")}),(n==null?void 0:n.length)>0?e("span",{onClick:C,className:"read-or-hide",children:b?e("span",{className:"font-bold text-[#8C7CF0] pl-2 text-lg",children:"Read more"}):e("span",{className:"font-bold text-[#8C7CF0] pl-2 text-lg",children:"Show less"})}):null]})};function wt({assignmentDetails:t,assignedPM:n,id:b}){var p,_,z,c,$;const T=re(),C=()=>{},h=()=>{},w=()=>N(!0),a=()=>N(!1),[L,N]=v.useState(!1),l=g=>{if(g===""){k.error("File name is empty");return}R.get(`http://test.bluepen.co.in/api/team/downloadassignmentfiles.php?assignment_id=${b}&file_name=${g}`).then(m=>{var r,s,u;if(console.log(m.data),((r=m==null?void 0:m.data)==null?void 0:r.status)==="success"){k.success("File downloaded successfully");let y=(s=m==null?void 0:m.data)==null?void 0:s.file_url;console.log("url",y);let P=document.createElement("a");P.href=y,P.setAttribute("download",(u=m==null?void 0:m.data)==null?void 0:u.file_name),document.body.appendChild(P),P.click(),P.parentNode.removeChild(P)}else k.error("Something went wrong")}).catch(m=>{console.log(m),k.error("Something went wrong")})};return o(j,{children:[e(S,{item:!0,xs:12,md:12,children:o(he,{variant:"outlined",sx:{p:3,background:`${T.colors.alpha.black[5]}`},children:[o(x,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[e(je,{href:"#",variant:"h3",color:"text.primary",children:t==null?void 0:t.title}),e(M,{onClick:w,size:"small",variant:"outlined",children:"Download Assignment Files"})]}),o(x,{children:[o(f,{color:"text.secondary",children:["Assignment Course:"," ",e(W,{sx:{mr:.5},size:"small",label:t==null?void 0:t.course,color:"secondary",onClick:h,onDelete:C})]}),o(f,{color:"text.secondary",children:["Assignment Level:"," ",e(W,{sx:{mr:.5},size:"small",label:t==null?void 0:t.level,color:"secondary",onClick:h,onDelete:C})]}),o(f,{color:"text.secondary",children:["Assignment Stream:"," ",e(W,{sx:{mr:.5},size:"small",label:t==null?void 0:t.stream,color:"secondary",onClick:h,onDelete:C})]}),o(f,{color:"text.secondary",children:["Assignment Tags:"," ",(p=t==null?void 0:t.subject_tags)==null?void 0:p.map((g,m)=>e(W,{sx:{mr:.5},size:"small",label:g,color:"secondary",onClick:h,onDelete:C},m))]}),o(f,{color:"text.secondary",children:["Assignment Type:"," ",(_=t==null?void 0:t.type)==null?void 0:_.map((g,m)=>e(W,{sx:{mr:.5},size:"small",label:g,color:"secondary",onClick:h,onDelete:C},m))]}),o(f,{sx:{pb:2},color:"text.secondary",children:[e("span",{className:"pr-3",children:"Description :"})," ",e(bt,{children:t==null?void 0:t.description})]})]}),e(F,{sx:{my:2}}),o(Xe,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[o(f,{display:"flex",alignItems:"center",variant:"subtitle2",children:[e(Qe,{sx:{mr:1}}),ae(t==null?void 0:t.submission_date).format("MMMM Do YYYY, h:mm:ss a")]}),o(f,{display:"flex",alignItems:"center",variant:"subtitle2",children:[o(f,{sx:{mr:1,color:"red",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e(ke,{sx:{mr:1}}),"Deadline:"]}),e(f,{display:"flex",alignItems:"center",variant:"subtitle2",children:ae(t==null?void 0:t.deadline).format("MMMM Do YYYY, h:mm:ss a")})]}),o(f,{display:"flex",alignItems:"center",variant:"subtitle2",children:[o(f,{sx:{mr:1,color:"green",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e($e,{sx:{mr:1}}),"Budget:"]}),"₹",t==null?void 0:t.budget]}),n!==void 0?o(x,{sx:{display:"flex",alignItems:"start",justifyContent:"start",flexDirection:"column"},children:[o(f,{sx:{mr:1},children:["Assigned to:"," ",e("span",{className:"font-bold pl-1",children:n==null?void 0:n.name})]}),o(f,{sx:{mr:1},children:["Phone:"," ",e("span",{className:"font-bold pl-1",children:n==null?void 0:n.number})]})]}):null]})]})}),e(He,{"aria-labelledby":"transition-modal-title","aria-describedby":"transition-modal-description",open:L,onClose:a,closeAfterTransition:!0,children:e(qe,{in:L,children:o(x,{sx:_t,children:[" ",e("div",{className:"w-full text-gray-600 ",children:e("div",{className:"flex flex-wrap ",children:e("div",{className:"w-full p-4",children:o("div",{className:"flex flex-col p-8  rounded-lg sm:flex-row",children:[e("div",{className:"inline-flex items-center justify-center flex-shrink-0 w-16 h-16 mb-4 text-indigo-500 bg-indigo-100 rounded-full sm:mr-8 sm:mb-0",children:e(ge,{size:30})}),o("div",{className:"flex-grow flex-col flex items-start justify-start",children:[e("span",{className:"flex-grow flex flex-col",children:e("span",{className:"mt-1 text-base font-medium text-gray-900 capitalize",children:"Download Sample Files"})}),($=(c=(z=t==null?void 0:t.files)==null?void 0:z.split("_$_"))==null?void 0:c.filter(g=>g!==""))==null?void 0:$.map((g,m)=>o("div",{onClick:()=>l(g),className:"flex-grow flex items-center justify-between gap-5",children:[e("p",{className:"text-base leading-relaxed flex text-left text-white",children:g}),e("button",{className:"inline-flex items-center justify-center flex-shrink-0  mb-4 text-indigo-500 rounded-full sm:mr-8 sm:mb-0",children:e(Ce,{})})]},m))]})]})})})})]})})})]})}const Ct=ve(_e)(({theme:t})=>`
    background-color: ${t.colors.alpha.white[100]};
    padding-right: ${t.spacing(.7)}
`);function gt({projectManagers:t,isLoading:n,handleAssignPM:b}){const[T,C]=v.useState([]),[h,w]=v.useState("");let a=[];return t&&(a=t==null?void 0:t.map(l=>({id:l==null?void 0:l.id,name:l==null?void 0:l.name,number:l==null?void 0:l.number,status:l==null?void 0:l.status}))),o(j,{children:[e(ye,{variant:"outlined",children:e(Ct,{type:"text",value:h,onChange:l=>{if(w(l.target.value),h!==""){const p=a==null?void 0:a.filter(_=>_==null?void 0:_.name.toLowerCase().includes(l.target.value.toLowerCase()));C(p)}},placeholder:"Search name here...",startAdornment:e(fe,{position:"start",children:e(pe,{})})})}),e(x,{sx:{mt:3}}),e(x,{sx:{width:"100%"},children:e(be,{autoHeight:!0,rows:h!==""?T:a,columns:[{field:"id",headerName:"PM ID",flex:1,renderCell:l=>{var p,_;return e(xe,{to:`/team/management/profile/details/${(p=l==null?void 0:l.row)==null?void 0:p.id}`,className:"flex items-center",children:(_=l==null?void 0:l.row)==null?void 0:_.id})}},{field:"name",headerName:"Full name",flex:1,renderCell:l=>{var p;return e("span",{className:"flex items-center",children:(p=l==null?void 0:l.row)==null?void 0:p.name})}},{field:"number",headerName:"Phone Number",flex:1,renderCell:l=>{var p,_;return e("a",{href:`tel:${(p=l==null?void 0:l.row)==null?void 0:p.number}`,className:"flex items-center",children:(_=l==null?void 0:l.row)==null?void 0:_.number})}},{field:"action",headerName:"Assign Task",sortable:!1,flex:1,description:"Assign Task to Project Manager Here",renderCell:l=>{var p,_;return e(j,{children:((p=l==null?void 0:l.row)==null?void 0:p.status)==="Not Assigned"?e(j,{children:n[(_=l==null?void 0:l.row)==null?void 0:_.id]?o("span",{className:"flex items-center justify-start",children:[e(I,{size:20,sx:{color:"#fff !important"}}),e("span",{style:{marginLeft:"10px"},children:"Please Wait"})]}):e(M,{onClick:()=>{var z;return b((z=l==null?void 0:l.row)==null?void 0:z.id)},variant:"contained",size:"small",sx:{backgroundColor:"#8C7CF0 !important"},children:"Assign"})}):e(M,{variant:"outlined",size:"small",color:"success",children:"Assigned"})})}}],initialState:{pagination:{paginationModel:{pageSize:10}}},disableRowSelectionOnClick:!0,hideFooterPagination:!0})})]})}const kt=ve(_e)(({theme:t})=>`
    background-color: ${t.colors.alpha.white[100]};
    padding-right: ${t.spacing(.7)}
`),$t=[{value:"",text:"All"},{value:"inquiry sent",text:"Inquiry Sent"},{value:"inquiry not sent",text:"Inquiry Not Sent"},{value:"assigned",text:"Assigned"},{value:"not assigned",text:"Not Assigned"}];function At({freelancers:t,isLoading:n,handleInquiry:b,handleUnassign:T,handleAssign:C}){const[h,w]=v.useState([]),[a,L]=v.useState(""),[N,l]=v.useState(""),p=v.useRef(null),[_,z]=v.useState(!1);let c=[];t&&(c=t==null?void 0:t.map(r=>{var s,u;return{id:r==null?void 0:r.id,name:r==null?void 0:r.name,number:(s=r==null?void 0:r.number)==null?void 0:s.split("-")[1],country_code:(u=r==null?void 0:r.number)==null?void 0:u.split("-")[0],swing_status:r==null?void 0:r.swing_status,inquiry_status:r==null?void 0:r.inquiry_status,assigned_status:r==null?void 0:r.assigned_status}}));const $=[{field:"id",headerName:"Freelancer ID",flex:1,renderCell:r=>{var s,u;return e(xe,{to:`/team/management/profile/details/${(s=r==null?void 0:r.row)==null?void 0:s.id}`,className:"flex items-center text-blue918 hover:text-gray-200",children:(u=r==null?void 0:r.row)==null?void 0:u.id})}},{field:"name",headerName:"Full name",flex:1,renderCell:r=>{var s;return e("span",{className:"flex items-center",children:(s=r==null?void 0:r.row)==null?void 0:s.name})}},{field:"number",headerName:"Whatsapp Number",flex:1,renderCell:r=>{var s,u,y;return o(j,{children:[e("img",{src:"https://img.icons8.com/color/96/null/whatsapp--v1.png",width:"20px",height:"20px",alt:"whatsapp",className:"mr-2"}),e("a",{href:`
          https://wa.me/${(s=r==null?void 0:r.row)==null?void 0:s.country_code}${(u=r==null?void 0:r.row)==null?void 0:u.number}?text=Hi%20I%20am%20interested%20in%20your%20services%20and%20would%20like%20to%20know%20more%20about%20it.
          `,children:(y=r==null?void 0:r.row)==null?void 0:y.number})]})}},{field:"swing_status",headerName:"Swing Status",flex:1,renderCell:r=>{var s;return e(W,{size:"small",label:(s=r==null?void 0:r.row)==null?void 0:s.swing_status,sx:{backgroundColor:"#2856A9 "}})}},{field:"send_details",headerName:"Send Details",flex:1,renderCell:r=>{var s,u;return e(j,{children:((s=r==null?void 0:r.row)==null?void 0:s.inquiry_status)==="Inquiry Not Sent"?e(j,{children:n[(u=r==null?void 0:r.row)==null?void 0:u.id]?o("span",{className:"flex items-center justify-start",children:[e(I,{size:20,sx:{color:"#fff !important"}}),e("span",{style:{marginLeft:"10px"},children:"Please Wait"})]}):e(M,{variant:"contained",size:"small",sx:{backgroundColor:"#FFA319 !important"},onClick:()=>{var y;return b((y=r==null?void 0:r.row)==null?void 0:y.id)},children:"Send Inquiry"})}):e(M,{variant:"outlined",size:"small",color:"success",children:"Inquiry Sent"})})}},{field:"assign_task",headerName:"Assign Task",flex:1,renderCell:r=>{var s,u;return e(j,{children:r.row.assigned_status==="Not Assigned"?e(j,{children:n[(s=r==null?void 0:r.row)==null?void 0:s.id]?o("span",{className:"flex items-center justify-start",children:[e(I,{size:20,sx:{color:"#fff !important"}}),e("span",{style:{marginLeft:"10px"},children:"Please Wait"})]}):e(M,{variant:"contained",size:"small",sx:{backgroundColor:"#8C7CF0 !important"},onClick:()=>{var y;return C((y=r==null?void 0:r.row)==null?void 0:y.id)},children:"Assign"})}):e(j,{children:n[(u=r==null?void 0:r.row)==null?void 0:u.id]?o("span",{className:"flex items-center justify-start",children:[e(I,{size:20,sx:{color:"#fff !important"}}),e("span",{style:{marginLeft:"10px"},children:"Please Wait"})]}):e(M,{variant:"outlined",size:"small",color:"error",onClick:()=>{var y;return T((y=r==null?void 0:r.row)==null?void 0:y.id)},children:"Unassign"})})})}}],g=r=>{if(L(r.target.value),a!==""){const s=c.filter(u=>u.name.toLowerCase().includes(r.target.value.toLowerCase()));w(s)}},m=r=>{if(l(r),r!==""){if(r==="inquiry sent"){const s=c.filter(u=>{var y;return((y=u==null?void 0:u.inquiry_status)==null?void 0:y.toLowerCase())===(r==null?void 0:r.toLowerCase())});w(s)}else if(r==="inquiry not sent"){const s=c.filter(u=>{var y;return((y=u==null?void 0:u.inquiry_status)==null?void 0:y.toLowerCase())===(r==null?void 0:r.toLowerCase())});w(s)}else if(r==="assigned"){const s=c.filter(u=>u.assigned_status.toLowerCase()===(r==null?void 0:r.toLowerCase()));w(s)}else if(r==="not assigned"){const s=c.filter(u=>u.assigned_status.toLowerCase()===(r==null?void 0:r.toLowerCase()));w(s)}}else w(c)};return o(j,{children:[o(x,{py:3,display:"flex",alignItems:"center",justifyContent:"space-between",children:[e(x,{children:e(ye,{variant:"outlined",fullWidth:!0,children:e(kt,{type:"text",value:a,onChange:g,placeholder:"Search name here...",startAdornment:e(fe,{position:"start",children:e(pe,{})})})})}),o(x,{display:"flex",alignItems:"center",children:[e(f,{variant:"subtitle2",sx:{pr:1},children:"Filter by:"}),e(M,{size:"small",variant:"outlined",ref:p,onClick:()=>z(!0),endIcon:e(Se,{fontSize:"small"}),children:N===""?"All":N}),e(me,{disableScrollLock:!0,anchorEl:p.current,onClose:()=>z(!1),open:_,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},children:$t.map(r=>e(te,{onClick:()=>{m(r.value),z(!1)},children:r.text},r.value))})]})]}),e(x,{sx:{width:"100%"},children:e(be,{autoHeight:!0,rows:a!==""||N!==""?h:c,columns:$,initialState:{pagination:{paginationModel:{pageSize:25}}},disableRowSelectionOnClick:!0})})]})}function or(){const t=re(),{id:n}=Me(),[b,T]=v.useState("details"),[C,h]=v.useState({}),[w,a]=v.useState({}),[L,N]=v.useState([]),[l,p]=v.useState([]),[_,z]=v.useState({}),[c,$]=v.useState({id:!1}),g=[{value:"details",label:"Details Overview"},{value:"projectManagers",label:"All Project Managers"},{value:"freelancers",label:"All Freelancers"}],m=(d,A)=>{T(A)},r=()=>{R.get(`http://test.bluepen.co.in/api/team/freelancingassignmentdetails.php?id=${n}&role=admin`).then(d=>{h(d==null?void 0:d.data[0]),z(d.data[2].find(A=>{var i;return(A==null?void 0:A.id)===((i=d==null?void 0:d.data[0])==null?void 0:i.project_manager)})),a(d==null?void 0:d.data[1]),N(d==null?void 0:d.data[2]),p(d==null?void 0:d.data[3]),console.log(d)}).catch(d=>{console.log(d)})},s=async d=>{var A;$({...c,[d]:!0});try{const i=await R.get(`http://test.bluepen.co.in/api/team/assigntopm.php?pm_id=${d}&assignment_id=${n}`);console.log(i==null?void 0:i.data),k.success((A=i==null?void 0:i.data)==null?void 0:A.status)}catch(i){console.log(i),k.error("An error occured")}$({...c,[d]:!1}),r()},u=async d=>{var A;$({...c,[d]:!0});try{const i=await R.get(`http://test.bluepen.co.in/api/team/assigntofreelancer.php?freelancer_id=${d}&assignment_id=${n}`);console.log(i==null?void 0:i.data),k.success((A=i==null?void 0:i.data)==null?void 0:A.status)}catch(i){console.log(i),k.error("An error occured")}$({...c,[d]:!1}),r()},y=async d=>{var A;$({...c,[d]:!0});try{const i=await R.get(`http://test.bluepen.co.in/api/team/unassigntofreelancer.php?freelancer_id=${d}&assignment_id=${n}`);console.log(i==null?void 0:i.data),k.success((A=i==null?void 0:i.data)==null?void 0:A.status)}catch(i){console.log(i),k.error("An error occured")}$({...c,[d]:!1}),r()},P=async d=>{var A;$({...c,[d]:!0});try{const i=await R.get(`http://test.bluepen.co.in/api/team/sendinquirytoassign.php?freelancer_id=${d}&assignment_id=${n}`);console.log(i==null?void 0:i.data),k.success((A=i==null?void 0:i.data)==null?void 0:A.status)}catch(i){console.log(i),k.error("An error occured")}$({...c,[d]:!1}),r()};return v.useEffect(()=>{r()},[n]),o(j,{children:[e(Ie,{children:e("title",{children:"Tasks Dashboard"})}),e(We,{children:e(ot,{assignmentDetails:C,id:n})}),o(x,{fullwidth:"true",sx:{mx:2},children:[e(Le,{children:e(Ze,{onChange:m,value:b,variant:"scrollable",scrollButtons:"auto",textColor:"primary",indicatorColor:"primary",children:g.map(d=>e(Oe,{label:d.label,value:d.value},d.value))})}),e(he,{variant:"outlined",children:o(S,{container:!0,direction:"row",justifyContent:"center",alignItems:"stretch",spacing:0,children:[b==="details"&&o(j,{children:[e(S,{item:!0,xs:12,children:e(x,{sx:{background:`${t.colors.alpha.black[5]}`},children:e(S,{container:!0,spacing:0,children:e(S,{item:!0,xs:12,md:12,children:e(x,{p:4,sx:{background:`${t.colors.alpha.white[70]}`},children:e(wt,{assignmentDetails:C,assignedPM:_,id:n})})})})})}),o(S,{item:!0,xs:12,children:[e(F,{}),e(x,{p:4,sx:{background:`${t.colors.alpha.black[5]}`},children:o(S,{container:!0,spacing:4,children:[e(S,{item:!0,xs:12,sm:6,md:6,children:e(lt,{assignmentDetails:C,id:n})}),e(S,{item:!0,xs:12,sm:6,md:6,children:e(x,{p:4,children:e(nt,{userDetails:w})})})]})}),e(F,{})]}),e(S,{item:!0,xs:12,children:e(F,{})})]}),b==="projectManagers"&&e(S,{item:!0,xs:12,children:e(x,{p:4,children:e(gt,{projectManagers:L,handleAssignPM:s,isLoading:c})})}),b==="freelancers"&&e(S,{item:!0,xs:12,children:e(x,{p:4,children:e(At,{freelancers:l,isLoading:c,handleAssign:u,handleUnassign:y,handleInquiry:P})})})]})})]})]})}export{or as default};
