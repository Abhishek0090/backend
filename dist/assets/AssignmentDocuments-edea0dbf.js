import{a as m}from"./react-ef3399cd.js";import{a as O}from"./axios-a900fd7e.js";import{_ as d,a4 as I}from"./main-ee249c94.js";import{u as B,v as U}from"./freelancerSlice-d7c5526c.js";import{d as P}from"./studentApiSlice-ddff0128.js";import{a,F as z,j as t}from"./createLucideIcon-5244bfd8.js";import{X}from"./x-d8df971e.js";import{L as q}from"./loader-2-b93b986b.js";import{C as E,A as F}from"./chevron-left-7fef36cd.js";import"./array-cc2e2e42.js";import"./formik.esm-48e41763.js";import"./Box-a7bad236.js";const i=5;function te({nextHandler:w,prevStepHandler:N}){const y=B(),v=U(n=>n.student.allOtherAssignmentsDetails),[l,c]=m.useState([]),[_,A]=m.useState(null),[T,u]=m.useState(!1),[C,r]=m.useState(!1),[L,S]=m.useState([]),[k]=P(),D=n=>{let s=[...l],o=!1;r(!0),n.forEach(e=>{s.length<i?s.push(e):o=!0}),c(s);let g=JSON.parse(localStorage.getItem("assignment_files_random_number")),M={freelancing_assignment:s,submit:"submit",random_number:g||_};O.post("https://test.bluepen.co.in/api/student/fileuploadsubmitassignmentfreelancing.php",M,{headers:{"Content-Type":"multipart/form-data"}}).then(e=>{var h,f,p,x,b;A((h=e==null?void 0:e.data)==null?void 0:h.random_number),localStorage.setItem("assignment_files_random_number",(f=e==null?void 0:e.data)==null?void 0:f.random_number),S((p=e==null?void 0:e.data)==null?void 0:p.file_name),window.localStorage.setItem("saved_files_assignments",L),y(I({assignment_files:(x=e==null?void 0:e.data)==null?void 0:x.file_name_string,assignment_files_random_number:(b=e==null?void 0:e.data)==null?void 0:b.random_number})),console.log(e)}).catch(e=>{console.log(e)}),r(!1),u(!!o)},j=()=>{r(!0);const n={submit:"submit",...v};k(n).unwrap().then(s=>{console.log(s),d.success("Assignment submitted successfully"),w()}).catch(s=>{console.log(s),d.error("Something went wrong")}),r(!1)};return a(z,{children:[a("section",{id:"uploadothers",children:[t("label",{className:"block mt-4 mb-2 text-xl font-medium ",children:"Upload assignment guidelines and other related files"}),a("div",{className:"flex flex-col gap-2 md:w-[45rem] w-[20rem] items-center justify-center mt-4 mb-2",children:[(l==null?void 0:l.length)>=i?null:a("label",{htmlFor:"dropzone-file",className:"flex flex-col items-center justify-center w-full h-64 border-2 border-gray-300 border-dashed rounded-lg cursor-pointer bg-gray-50 dark:hover:bg-bray-800 hover:bg-gray-100 ",children:[(l==null?void 0:l.length)===0?a("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[t("svg",{"aria-hidden":"true",className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a("p",{className:"mb-2 text-sm text-gray-500 ",children:[t("span",{className:"font-semibold",children:"Upload assignment guidelines and other related files"})," ","(Can upload multiple files)"]}),t("p",{className:"text-xs text-gray-500 ",children:"PDF, DOC, DOCX, ZIP ,etc up to 10MB"})]}):a("div",{className:"flex flex-col items-center justify-center pt-5 pb-6",children:[t("svg",{"aria-hidden":"true",className:"w-10 h-10 mb-3 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:t("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a("p",{className:"mb-2 text-sm text-blue918 ",children:[t("span",{className:"font-semibold",children:"Add more assignment guidelines and other related files"})," ","(Max 5 files)"]}),t("p",{className:"text-xs text-gray-500 ",children:"PDF, DOC, DOCX, ZIP ,etc up to 10MB"})]}),t("input",{multiple:!0,id:"dropzone-file",type:"file",className:"hidden",onChange:n=>{r(!0);let s=[...n.target.files];if(console.log("files :>> ",s),s.length>i){d.error(`You can upload only ${i} files`),r(!1);return}if((s==null?void 0:s.length)+(l==null?void 0:l.length)>i){d.error(`You can upload only ${i} files`),r(!1);return}D(s)}})]}),l==null?void 0:l.map((n,s)=>a("div",{className:"flex items-center  justify-between w-full bg-gray-200 text-gray-800 px-2 rounded-lg my-0.5",children:[a("span",{className:"p-1 rounded-lg ",children:[s+1,". ",n==null?void 0:n.name]}),t("button",{onClick:()=>{let o=[...l];o.splice(s,1),c(o)},className:"m-1 leading-none text-white bg-red-500 rounded-full hover:text-gray-100 hover:bg-red-600",children:t(X,{size:20})})]},s)),C?a("div",{role:"status",children:[t(q,{size:20,className:"animate-spin"}),t("span",{className:"sr-only",children:"Loading..."})]}):null]})]}),a("div",{className:"flex flex-row gap-4 mt-5",children:[a("button",{onClick:()=>{N()},className:"flex flex-row items-center justify-center w-32 py-1 mt-5 mb-10 text-lg rounded-full  right-10 md:font-SemiBold md:text-xl text-blue918 md:py-3 md:w-48",children:[t("span",{className:"items-center px-2 ",children:t(E,{className:"w-5 h-5 mr-2"})}),t("span",{className:"ml-1 md:ml-2",children:"Prev"})]}),a("button",{onClick:j,className:"flex flex-row items-center justify-center w-32 py-1 mt-5 mb-10 text-lg text-white rounded-full bg-blue141 right-10 md:font-SemiBold md:text-xl md:py-3 md:w-48",children:[t("span",{className:"mr-1 md:mr-2",children:"Assign"}),t("span",{className:"items-center px-2 ",children:t(F,{className:"w-5 h-5 ml-2"})})]})]})]})}export{te as default};
